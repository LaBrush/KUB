{% extends "::base.html.twig" %}

{% block body %}
	
		<article class="article">
			<h2 class="section-title">Créer un {{ user.class }}</h2>
		</article>

		<article class="article">
			{{ form_start(form, { 'attr': {'class': 'formulaire-creation-utilisateur'} }) }}

				{% include "KubUserBundle:Manage:" ~ user.class ~ "_form.html.twig" %}

				<span class="validate">
					<input class="button-yes" type="submit">
					<a class="button" href="{{ path('user_list', { role: user.class }) }}">Annuler</a>
				</span>
			{{ form_end(form) }}
		</article>			

{% endblock %}

{% block js %}

	<script type="text/javascript" src="{{ asset('ressources/select2/select2.min.js') }}"></script>
	<link rel="stylesheet" href="{{ asset('ressources/select2/select2.css') }}" />
	{{ form_javascript(form) }}
	{{ form_stylesheet(form) }}

	<script>
    	// garde une trace du nombre de champs tuteurs qui ont été affichés
    	var tuteurCount = '{{ form.tuteurs | length }}';

	    $(document).ready(function() {
	        $('.add-another-tuteurs').click(function() {
	            var tuteurList = $('#kub_userbundle_eleve_tuteursAdd');

	            var newWidget = tuteurList.attr('data-prototype');
	            newWidget = newWidget.replace(/__name__/g, tuteurCount);
	            tuteurCount++;

	            var newLi = $('<p></p>').html(newWidget);
	            newLi.appendTo(tuteurList);

	            return false;
	        });
	    })
	</script>
{% endblock %}